<div ng-class="$root.collapse?'pullin':'pushout'" ng-init="init();">
    <div class="row filter_wrap">
        <div class="col-md-5 col-sm-12">
            <div class="filter_wrap_left di">
                <span class="di w200 fw500" style="letter-spacing: 0.25px">Keyword Search</span>
                <!-- <h5 class="di w120" style="font-weight: 400">By Video</h5> -->
            </div>
            <div class="w200 di search_wrp">
                <input type="text" class="form-control di sea" placeholder="Enter the Video Url/ID Here.." ng-model="search1" />
            </div>
        </div>
        <div class="col-md-7 col-sm-12" style="padding-left:0px !important;">
            <div class="di">
                <label style="margin-top:17px;">Sources &nbsp;</label>
                <select class="di selecti fs12">
                    <option>Google</option>
                </select>
            </div>
            <div class="di">
                <label style="margin-top:14px;"> &nbsp; &nbsp; Geotargeting &nbsp;</label>
                <select class="di selecti fs12">
                    <option>United States (.com)</option>
                </select> &nbsp;
            </div>

            <div class="dib pull-right">
                <button ng-click="search=search1" class="btn-lg btn-filter-search">
                    <i class="fa fa-search"></i> Search</button>
            </div>
            <div class="dib pull-right" ng-click="toggleSettings=!!!toggleSettings;" style="cursor: pointer;">
                <span>
                    <img class="di" style="padding:5px;" ng-src="{{toggleSettings?'../../../../assets/images/Uppng.png':'../../../../assets/images/Downpng.png'}}"
                    />
                </span>
                <label class="dib" style="cursor: pointer; width:80px;top: 9px; position: relative;">Advanced Settings</label>
            </div>
        </div>
    </div>
    <div class="filter_wrap" style="padding-top:25px;" ng-if="toggleSettings">
        <form class="form-inline">
            <div class="form-group col-md-6">
                <label for="email">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Language</label>
                <select class="form-control" style="width:76%;" ng-model="filter.lang">
                    <option value="" selected>Any</option>
                </select>
            </div>
            <div class="form-group col-md-6">
                <label for="email">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; License</label>
                <select class="form-control" style="width:76%;" ng-model="filter.lang">
                    <option value="" selected>Any</option>
                </select>
            </div>
            <br/>
            <div class="clearfix" style="width:100%; height:24px;"></div>
            <div class="form-group col-md-6">
                <label for="email">Search Priority</label>
                <select class="form-control" style="width:76%;" ng-model="filter.lang">
                    <option value="" selected>Most Relevant First</option>
                </select>
            </div>
            <div class="form-group col-md-6">
                <label for="email">Video Duration</label>
                <select class="form-control" style="width:76%;" ng-model="filter.lang">
                    <option value="" selected>Any</option>
                </select>
            </div>
            <br/>
            <div class="clearfix" style="width:100%; height:24px;"></div>
            <div class="form-group col-md-6">
                <label for="email">Published Bef.</label>
                <select class="form-control" style="width:76%;" ng-model="filter.lang">
                    <option value="" selected>Any</option>
                </select>
            </div>
            <div class="form-group col-md-6">
                <label for="email">Video Definition</label>
                <select class="form-control" style="width:76%;" ng-model="filter.lang">
                    <option value="" selected>Any</option>
                </select>
            </div>
            <div class="clearfix" style="width:100%; height:50px;"></div>
            <div class="form-group col-md-6">
                <label for="email">Published Aft.</label>
                <select class="form-control" style="width:76%;" ng-model="filter.lang">
                    <option value="" selected>Any</option>
                </select>
            </div>
            <div class="form-group col-md-6">
                <label for="email">Results Display</label>
                <select class="form-control" style="width:76%;" ng-model="filter.lang">
                    <option value="" selected>Monetized Video Only</option>
                </select>
            </div>
            <br/>
            <div class="clearfix" style="width:100%; height:24px;"></div>

        </form>
    </div>
    <div class="mt30"></div>

    <div class="filter_wrap" style="border-radius:8px;">
        <div style="margin:8px 5px;">
            <label class="di fw500" style="margin:6px;font-size:1rem;letter-spacing:.5px;">Search Results</label>
            <div class="di" ng-show="totalCount>pageSize" style="line-height: 45px; padding-left:15px; font-size: 14px;color: #888;">Viewing {{pageSize}} entries
                <span>show </span>
                <select style="height: 31px; width: 57px; color: #666; border-radius: 3px; padding: 5px;">
                    <option>All</option>
                </select>
            </div>
            <div class="pull-right" style="padding-right: 7px;">
                <button class="btn btn-success btn-table-suc" style="">
                    <span>
                        <img src="../../assets/images/check.png" />
                    </span> Add to List</button>
                <button class="btn btn-info btn-table-inf" data-toggle="modal" data-target="#getKeywordsModal">
                    <span>
                        <img src="../../assets/images/link.png" />
                    </span> Get Keywords
                </button>
                    <ul class="navbar-right download_data tic_dow_na mr0" id="download" style="padding-left: 7px;">
                        <li class="dropdown">
                    <button class="btn btn-warning btn-table-war dropdown-toggle download_sheet" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                        <span>
                            <img src="../../assets/images/download.png" />
                        </span> Export</button>
                        <ul class="dropdown-menu">
                            <li><a href="javascript:;" ng-click="$root.exportTable('searchtable','csv','keyword-search');"><img src="../../assets/images/csv-export.svg" width="32"/> Download as CSV</a></li>
                            <hr style="margin: 5.5px 0px;">
                            <li><a ng-click="$root.exportTable('searchtable','Excel','keyword-search');" download><img src="../../assets/images/excel.svg" width="32"/> Download as Excel</a></li>
                          </ul>
                        </li>
                      </ul>
            </div>
            <div class="clearfix"></div>
            <div class="table-responsive" style="padding:8px;">
                <table class="table table-striped table-hover table-bordered" id="searchtable">
                    <thead>
                        <th width=39 export="no">
                            <input type="checkbox" class="filled-in" id="app_" ng-model="keepmesign" ng-change="">
                            <label class="checkbox_editable" for="app_" style="font-weight: normal !important; font-size: 14px !important;"></label>
                        </th>
                        <th width=39 style="padding:15px;">#</th>
                        <th width=250>Keywords</th>
                        <th export="no">Actions</th>
                    </thead>
                    <tbody>
                        <tr dir-paginate="keyword in keywords | filter: search| itemsPerPage: pageSize | orderBy:sortType:sortReverse" current-page="currentPage"
                            total-items="totalCount">
                            <td export="no">
                                <input type="checkbox" class="filled-in" id="app_" ng-model="check" ng-change="">
                                <label class="checkbox_editable" for="app_" style="font-weight: normal !important; font-size: 14px !important;"></label>
                            </td>
                            <td ng-bind="$index+((currentPage-1)*pageSize) + 1"></td>
                            <td>{{keyword.value}}</td>
                            <td export="no" ng-style="{'text-align':$root.collapse?'center':'left'}">
                                <a href="#/toolsuite/placement-search/by-video?search={{keyword.value}}" class="btn btn-primary" style="width:100px; margin-bottom:0px !important; margin-right: 2.5px !important;">
                                    <i class="fa fa-search"></i> Search</a>
                                <a href="#/toolsuite/placement-search/by-channel?search={{keyword.value}}" class="btn btn-primary" style="width:100px; margin-bottom:0px !important; margin-right: 2.5px !important;">
                                    <i class="fa fa-search"></i> Channel</a>
                                <a href="#/toolsuite/placement-search/by-keyword?search={{keyword.value}}" class="btn btn-primary" style="width:100px; margin-bottom:0px !important; margin-right: 0px !important;">
                                    <i class="fa fa-search"></i> Keyword</a>
                                <a href="https://www.google.com/search?q={{keyword.value}}" target="_blank" class="btn btn-hollow">
                                    Open in Google
                                    <i class="fa fa-external-link"></i>
                                </a>
                                <a href="https://www.youtube.com/results?search_query={{keyword.value}}" target="_blank" class="btn btn-hollow-red">
                                    Open in YouTube
                                    <i class="fa fa-external-link"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="pag-footer tab-footer" ng-show="search==''||search==undefined">
                    <div class="di">Show </div>
                    <select class="di">
                        <option>All</option>
                    </select>
                    <dir-pagination-controls class="par_pagination" boundary-links="true" on-page-change="pageChanged(newPageNumber)" template-url="partials/dirPagination.tpl.html"></dir-pagination-controls>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="getKeywordsModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header" style="background: #eee; border-radius: 8px;">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Selected Keywords List</h4>
            </div>
            <div class="modal-body" style="max-height: 150px; overflow: auto;">
                <div id="clipboard_wrapper">
                    <span style="font-weight: bold; margin:10px;" ng-repeat="keyword in keywords">{{keyword.value}}
                        <br/>
                    </span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-info" onclick="copyToClipboard('#clipboard_wrapper');" ng-click="flash.pop({title: 'Copied to clipboard succesfully', body: 'Copied', type: 'success'})">
                    <i class="fa fa-clipboard"></i>Copy to clipboard</button>
                <button type="button" class="btn" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
    <script type="text/javascript">
        function copyToClipboard(element) {
            var $temp = $("<textarea>");
            var brRegex = /<br\s*[\/]?>/gi;
            $("body").append($temp);
            $temp.val($(element).html().replace(brRegex, "\r\n").replace( new RegExp('ngRepeat: keyword in keywords --><span ng-repeat="keyword in keywords" class="ng-binding ng-scope">', 'g'),"").replace(new RegExp('</span><!-- end ','g'),"").replace(new RegExp('<!-- ','g'),"").replace(new RegExp('ngRepeat: keyword in keywords -->','g'),"")).select();
            document.execCommand("copy");
            $temp.remove();
        }
    </script>
</div>

</div>